## 1.Linux的文件权限

在linux中的每个用户必须属于一个组，不能独立于组外。在linux中每个文件有所有者、所在组、其它组的概念

**ls -al（l）**:

ls -l(别名ll 就可以查看)

![linux-ls.png](https://i.loli.net/2019/11/19/FajuBx9hKcLfEiv.png)

从左到又每一列的信息依次为 **权限、 连接数、 所有者 、 用户组 、 文件容量 、 修改日期 、 文件名**

第一列的十位字母代表的是文件的类型和权限，第一个字符代表这个文件是“目录、文件或链接文件等”含义：

   d：代表是目录

  -：代表是文件

 	 l：代表是连接文件

 	 b：代表设备文件里可供存储的接口设备

 	 c：代表设备文件里面的串行端口设备。如键盘，鼠标等

后边9个字符，每3个字符为一组，“rwx”（可读、可写、可执行eXecute）这三个参数的组合，（rwx3者的顺序不能改变，换句话说，第一个要么是r,要么啥都没有，不能是w或者x），三个组合分别代表“文件所有者的权限”、“同用户组的权限”、“其他非本用户组的权限”。

![linux-permission.png](https://i.loli.net/2019/11/19/1rkOtD9GxQ7BAZ6.png)

**权限的重要性：**

系统保护的功能；

团队开发软件或数据共享的功能；

**改变文件属性和权限：**

- **chgrp**: 改变文件所属用户组(change group)

- - - chgrp [-R]  users  目录或文件 ： 将这个路径下的文件的用户组改成“users“
    - 这个新用户组一定得是/etc/group下有的，否则会报错。
    - 若最后一个参数是目录，则表示只将这个目录下的文件的用户组改成这个。
    - R表示若最后一个参数是目录，则将当前目录下的文件连同子目录下的所有文件的用户组都改成这个。

- **chown**: 改变文件所有者(change owner)

- - - chown [-R] 用户名 文件或目录 ： 将这个目录下的所有文件的所有者都改成这个用户名。
    - 这个用户名必须是/etc/passwd下有的才行。
    - 这个命令可以既修改文件主又修改用户组：
    - chown [-R] 用户名：用户组名 目录/文件（：和 . 都可以）
    - chown [-R] 用户名.用户组名 目录/文件
    - 由于用户名可以存在小数点，当出现含有小数点的用户名时，系统会发生误判，所以我们一般都使用：来连接用户名和用户组名。
    - 还可以仅修改用户组名：chown [-R] .用户组名 目录/文件

- **chmod**: 改变文件的权限

 改变文件的权限有两种方法：用数字或者符号进行权限的修改

a）用数字进行权限的修改

Linux文件的基本权限有9个，分别是owner、group、others三种身份各有自己的read、write、execute权限。在这种方式中，r＝4、w＝2、x＝1，将每一组的三个值加起来，组成一个三位数即可。例如：

文件主：rwx ＝ 4＋2＋1＝7；

同组用户：rwx＝4＋2＋1＝7；

其他人：－－－＝0＋0＋0＝0；

所以命令如下：

**chmod [-R] 770  文件/目录**

b）用符号进行权限的修改s

用u、g、o 代表user、group、others三种身份的权限，a 代表 all，也就是全部的身份。 +（加入），-（除去），=（设置）。

**chmod u/g/o/a +/-/= r/w/x 文件/目录**

例子：文件主能够读、写、执行；同组用户和其他用户能够读、执行。

**chmod u=rwx,go=rx 文件名**

假设原先不知道文件的属性，现在只想让所有的人能够执行这个文件，则：

**chmod a+x 文件/目录**

假设原先不知道文件的属性，现在只想让同组用户和其他用户无法写，则：

**chmod go-w 文件/目录**

**☆☆☆☆**

**目录和文件的权限意义：**

a）权限对文件的意义.

​            r：代表可读取此文件的实际内容

​      w：代表可以编辑、新增或者修改文件的内容（但是不包含删除文件）

​      x：代表该文件具有可以被系统执行的权限。<与windows不同，在Linux中判断一个文件是否可以执行，不是根据后缀名（如.exe ，.bat，.com），而是和这个文件是否具有“x”权限决定的。>

b）权限对目录的意义

​     r：代表具有读取目录结构列表的权限（你可以使用ls命令将目录下的所有列表读出来）

​     w：这个权限对目录来说可是很强大的，表示你具有更改该目录结构列表的权限

​        主要有：新建新的文件与目录

​              删除已经存在的文件或者目录（无论文件的权限是怎样的）

​              将已经存在的文件或者目录重命名

​              转移该目录内的文件、目录位置

​     x：目录虽然不可以被拿来执行，但是目录的x代表的是用户能否进入该目录成为工作目录的用途。（所谓工作目录就是你当下的目录，也就是时候，如果目录不具有x权限，那么你就不能通过cd命令进入到该目录下工作）。

能不能进入某一目录，只与该目录的x 权限有关。

 Linux的单一文件或者目录的最大容许文件名为255个字符,包含完整路径名记（/）的完整文件名为4096个字符。

------



## 2.Linux系统目录结构

【**Linux系统目录结构**】

登录系统后，在当前命令窗口下输入 ls / 你会看到

![linux-catalog.png](https://i.loli.net/2019/11/19/39qx8kwHeXCv6nm.png)

以下是对这些目录的解释：

**/bin** bin是Binary的缩写。这个目录存放着最经常使用的命令。

**/boot** 这里存放的是启动Linux时使用的一些核心文件，包括一些连接文件以及镜像文件。

**/dev**  dev是Device(设备)的缩写。该目录下存放的是Linux的外部设备，在Linux中访问设备的方式和访问文件的方式是相同的。

**/etc** 这个目录用来存放所有的系统管理所需要的配置文件和子目录。

**/home** 用户的主目录，在Linux中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的。

**/lib** 这个目录里存放着系统最基本的动态连接共享库，其作用类似于Windows里的DLL文件。几乎所有的应用程序都需要用到这些共享库。

**/lost+found**  这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。

**/media linux** 系统会自动识别一些设备，例如U盘、光驱等等，当识别后，linux会把识别的设备挂载到这个目录下。

**/mnt** 系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将光驱挂载在/mnt/上，然后进入该目录就可以查看光驱里的内容了。

**/opt** 这是给主机额外安装软件所摆放的目录。比如你安装一个ORACLE数据库则就可以放到这个目录下。默认是空的。

**/proc** 这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。这个目录的内容不在硬盘上而是在内存里，我们也可以直接修改里面的某些文件，比如可以通过下面的命令来屏蔽主机的ping命令，使别人无法ping你的机器： echo 1 > /proc/sys/net/ipv4/icmp_echo_ignore_all。

**/root** 该目录为系统管理员，也称作超级权限者的用户主目录。

**/sbin** s就是Super User的意思，这里存放的是系统管理员使用的系统管理程序。

**/selinux** 这个目录是Redhat/CentOS所特有的目录，Selinux是一个安全机制，类似于windows的防火墙，但是这套机制比较复杂，这个目录就是存放selinux相关的文件的。

**/srv** 该目录存放一些服务启动之后需要提取的数据。

**/sys** 这是linux2.6内核的一个很大的变化。该目录下安装了2.6内核中新出现的一个文件系统 sysfs ，sysfs文件系统集成了下面3种文件系统的信息：针对进程信息的proc文件系统、针对设备的devfs文件系统以及针对伪终端的devpts文件系统。该文件系统是内核设备树的一个直观反映。当一个内核对象被创建的时候，对应的文件和目录也在内核对象子系统中被创建。

**/tmp** 这个目录是用来存放一些临时文件的。

**/usr** 这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似与windows下的program files目录。

/usr/bin：系统用户使用的应用程序。

/usr/sbin：超级用户使用的比较高级的管理程序和系统守护程序。

/usr/src：内核源代码默认的放置目录。

**/var**  这个目录中存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件。

在linux系统中，有几个目录是比较重要的，平时需要注意不要误删除或者随意更改内部文件。/etc： 上边也提到了，这个是系统中的配置文件，如果你更改了该目录下的某个文件可能会导致系统不能启动。/bin, /sbin, /usr/bin, /usr/sbin: 这是系统预设的执行文件的放置目录，比如 ls 就是在/bin/ls 目录下的。值得提出的是，/bin, /usr/bin 是给系统用户使用的指令（除root外的通用户），而/sbin, /usr/sbin 则是给root使用的指令。 /var： 这是一个非常重要的目录，系统上跑了很多程序，那么每个程序都会有相应的日志产生，而这些日志就被记录到这个目录下，具体在/var/log 目录下，另外mail的预设放置也是在这里。

------



## 3.Linux文件与目录操作

- **绝对路径：**

路径的写法，由根目录 / 写起，例如： /usr/share/doc 这个目录。

- **相对路径：**

路径的写法，不是由 / 写起，例如由 /usr/share/doc 要到 /usr/share/man 底下时，可以写成： cd ../man 这就是相对路径的写法啦！

**目录的相关操作：**

**ls**（查看文件与目录）

**cd**（切换目录）  

**pwd**（显示当前所在目录）

**mkdir**（创建新目录）

*mkdir 【-mp】目录名称*

加了-p 参数，可以自行创建多层目录， 加了-m，可以强制设置属性。

case:

*mkdir test*

*mkdir -p test1/test2/test3/test4*

*mkdir -m 711 test2（给予新目录drwx--x--x的权限）*

**rmdir**（删除“空”目录）

*rmdir [-p] 目录名称（-p 可以连同上层空目录一起删除）*

*rmdir -p test1/test2/test3/test4*

**cp**（复制文件或目录）

*cp [-adfilprsu] 源文件（source） 目标文件（destination）*

**-a**：相当于-pdr的意思；

**-i**：若目标文件已经存在且无法开启，则删除后再尝试一次；

**-p**：连同文件的属性一起复制过去，而非使用默认属性（备份常用）；

**-r**：递归持续复制，用于**目录的复制行为**；

case:

*cp test testtest （将test文件***重命名***为testtest）*

*cp /var/log/wtmp* **.***（复制到当前目录.）*

*cp -r /etc/ /tmp（复制etc目录下的所有内容到/tmp下，权限可能被改变了）*

**rm**（移除文件或目录）

*rm [-fir] 文件或目录*

**-f**：force的意思，忽略不存在的文件，不会出现警告信息；

**-i**：互动模式，在删除前会询问用户是否操作；

**-r**：递归删除，危险

case:

*不能直接删除目录，删除目录的话需要加-r*

*rm -r /tmp/test （root用户默认会加入-i参数，询问，删除的是test文件，没有删除tmp）*

*touch  /tmp/aaa （新建空文件aaa）*

*rm /tmp/aaa（直接删除文件aaa）*

**mv**（移动文件与目录，或更名）

*mv [-fiu] source destination*

**-f**：force强制的意思，如果目标文件已经存在，不会询问而直接覆盖；

**-i**：若目标文件已经存在，就会询问是否覆盖；

**-u**：若目标文件已经存在，且source比较新，才会更新；

case:

*mv aaa test（将文件aaa移动到目录test中）*

*mv test mytest（将test重命名为mytest）*

*mv aaa bbb ccc test（将aaa、bbb、ccc多个源文件或目录全部移动到test目录中）*

**文件内容查阅**

**cat**：由第一行开始显示文件内容；

**tac**：从最后一行开始显示，可以看出tac是cat的倒写形式；

**nl**：显示的时候，顺便输出行号；

**more**：一页一页的显示文件内容；

**less**：与more类似，但是可以往前翻页；

**head**：只看开头几行；

**tail**：只看结尾几行；

**od**：以二进制的方式读取文件内容

**直接查看文件内容 cat、tac、nl**

**cat**（concatenate）

*cat [-AbEnTv] 文件*

**-A**：相当于-vET的整合参数，可列出一些特殊字符，而不是空白而已；

**-b**：列出行号，仅针对非空白行做行号显示，空白行不标行号；

**-E**：将结尾用断行字符 $ 显示出来；

**-n**：打印出行号，连同空白行也会有行号，区别于-b；

**-T**：将Tab按键以^T显示出来；

**-v**：列出一些看不出来的特殊字符

**cat -n 文件路径 | tail -n +5 | head -n 6  // 显示 5 ～ 10 行的内容， 包括5 和10**

**cat 文件路径 | head -n 10 | tail -n +5   //同上**

**tac**（反向显示）

**nl**（添加行号打印）

*nl [-bnw] 文件*

**可翻页查看文件内容 more和less**

**more**（一页一页翻动）

![linux-more.png](https://i.loli.net/2019/11/19/Tnex5WvCocU3p4m.png)

如果文件内容较多，more 命令之后，会继续等到后续操作

**空格键（Space）**：向下翻页；

**Enter**：向下滚动一行；

**/字符串**：在当前显示内容中，向下查询该字符串；

**:f**：显示出文件名以及目前显示的行数；

**q**：直接离开more，不再显示该文件内容；

**b**：往回翻页，只对文件有用，对管道无用

**less**（一页一页翻动）

 less可以用向上、下按键的功能前后翻页，也可以向上查询

**空格键（Space）**：向下翻页；

**[PageDown]**：向下翻动一页

**[PageUp]**：向上翻动一页

**Enter**：向下滚动一行；

**/字符串**：向下查询该字符串；

**?字符串**：向上查询该字符串；

**n**：重复前一个查询（与/或？有关）；

**N**：反向重复前一个查询（与/或？有关）；

**q**：直接离开less，不再显示该文件内容；

**数据选取查看 head和tail**

**head**（取出前面几行）

*head [-n number] 文件（默认显示十行）*

**-n**：后边接数字，代表显示几行的意思；

**tail**（取出后边几行）

*tail [-n number] 文件*

*tail [-f] 文件*

**-f**：表示持续监测后边所接的文件内容，一般用于查看日志进程，按下[ctrl]+c才会结束检测；

**touch**（修改文件时间或者创建新文件）

*touch [-acdmt] 文件*

**-a**：仅修改访问时间；

**-c**：仅修改访问时间，若该文件不存在则不创建新文件；

**-d**：后面可以接想要修改的日期而不用目前的日期；

**-m**：仅修改mtime；

**-t**：后面可以接想要修改的时间而不用目前的时间；